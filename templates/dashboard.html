{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}
{% block page_title %}Panel de Control{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-md-12">
            <h2 class="text-primary">¡Bienvenido al Sistema de Inventario de Activos!</h2>
            <p class="text-muted">Visualizá aquí el estado general de los activos registrados.</p>
        </div>
    </div>

    <!-- Tarjetas de resumen -->
    <div class="row">
        <div class="col-md-4 mb-4">
            <div class="card border-start border-primary border-4 shadow h-100 py-2">
                <div class="card-body d-flex align-items-center justify-content-between">
                    <div>
                        <h6 class="text-primary fw-bold">Total de Activos</h6>
                        <h3 class="fw-semibold">{{ total_activos }}</h3>
                    </div>
                    <div class="text-primary">
                        <i class="bi bi-hdd-stack-fill" style="font-size: 2.5rem;"></i>
                    </div>
                </div>
            </div>
        </div>
        <!-- Agregá más tarjetas si tenés más estadísticas -->
        <!-- Ejemplo de estado -->
        <div class="col-md-4 mb-4">
            <div class="card border-start border-success border-4 shadow h-100 py-2">
                <div class="card-body d-flex align-items-center justify-content-between">
                    <div>
                        <h6 class="text-success fw-bold">Activos Activos</h6>
                        <h3>{{ activos_activos }}</h3>
                    </div>
                    <div class="text-success">
                        <i class="bi bi-check-circle-fill" style="font-size: 2.5rem;"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card border-start border-danger border-4 shadow h-100 py-2">
                <div class="card-body d-flex align-items-center justify-content-between">
                    <div>
                        <h6 class="text-danger fw-bold">Activos en Observación</h6>
                        <h3>{{ activos_observacion }}</h3>
                    </div>
                    <div class="text-danger">
                        <i class="bi bi-exclamation-triangle-fill" style="font-size: 2.5rem;"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-4">
            <div class="card border-start border-danger border-4 shadow h-100 py-2">
                <div class="card-body d-flex align-items-center justify-content-between">
                    <div>
                        <h6 class="text-danger fw-bold">Activos de Baja</h6>
                        <h3>{{ activos_baja }}</h3>
                    </div>
                    <div class="text-danger">
                        <i class="bi bi-exclamation-triangle-fill" style="font-size: 2.5rem;"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Gráfico (opcional) -->
    <div class="row">
        <div class="col-md-12">
            <div class="card shadow mb-4">
                <div class="card-header bg-primary text-white">
                    Distribución de Estados de los Activos
                </div>
                <div class="card-body">
                    <canvas id="estadoChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctx = document.getElementById('estadoChart').getContext('2d');
    const estadoChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Activo', 'En Observación', 'Quemado', 'Dado de Baja'],
            datasets: [{
                label: 'Cantidad',
                data: [{{ activos_activos }}, {{ activos_observacion }}, {{ activos_quemados }}, {{ activos_baja }}],
                backgroundColor: [
                    'rgba(40, 167, 69, 0.7)',    // verde
                    'rgba(255, 193, 7, 0.7)',     // amarillo
                    'rgba(220, 53, 69, 0.7)',     // rojo
                    'rgba(108, 117, 125, 0.7)'    // gris
                ],
                borderColor: [
                    'rgba(40, 167, 69, 1)',
                    'rgba(255, 193, 7, 1)',
                    'rgba(220, 53, 69, 1)',
                    'rgba(108, 117, 125, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom'
                }
            }
        }
    });
</script>
{% endblock %}
